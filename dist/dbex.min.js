!function(a){function b(a,b,c){var d,e=new Date;c?(e.setTime(e.getTime()+1e3*c),d="; expires="+e.toGMTString()):d="",document.cookie=a+"="+b+d+"; path=/"}function c(a){var b,c,d=a+"=",e=document.cookie.split(";");for(b=0;b<e.length;b+=1){for(c=e[b];" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(d))return c.substring(d.length,c.length)}return null}function d(){if(!JSON.stringify||!JSON.parse)return!1;if(/(MSIE [0-8]\.\d+)/.test(navigator.userAgent))return!1;try{localStorage.test=1}catch(a){return!1}return!0}function e(a){var b,c=0,d=Math.random();for(b=0;b<a.length;b+=1)if(c+=a[b],d<c)return b;return-1}function f(a){return"session"!==a?w:v}function g(a){return"session"!==a?z:y}function h(a){var b,c;"function"==typeof a?a.apply(u):(b=a[0],c=Array.prototype.slice.call(a,1),u[b]&&u[b].apply(u,c))}function i(a){return D[a]}function j(a,b){var d,e,g,h,i=f(b);if(e=c(i))for(g=e.split("|"),d=0;d<g.length;d+=1)if(h=g[d].split(":"),h[0]===a)return Number(h[1]);return-1}function k(a,d,e){var h=f(e),i=g(e),j=c(h),k=[a,d].join(":");j=j?[j,k].join("|"):k,b(h,j,i)}function l(){var a,d,e,h,i,j,k,l,m,n=["user","session"],o=[];for(a=0;a<n.length;a+=1)if(e=n[a],h=f(e),j=g(e),i=c(h)){for(k=i.split("|"),d=0;d<k.length;d+=1)l=k[d].split(":"),m=l[0],D[m]&&o.push(k[d]);i=o.join("|"),b(h,i,j)}b(x,"x",y)}function m(b){(a.Image?new Image:a.document.createElement("img")).src=a.location.protocol+b}function n(a,b){var c=A+"/track?t=s&exp="+a+"&var="+b;m(c)}function o(a,b,c){var d=c?"&val="+c:"",e=A+"/track?t=c&exp="+a+"&var="+b+d;m(e)}function p(){var a=c(x);return!!a}function q(a){var b;if(!B){for(C=a,b=0;b<a.length;b+=1)D[a[b][0]]=a[b];for(l(),B=!0,b=0;b<E.length;b+=1)h(E[b])}}function r(a){var b=document.createElement("script"),c=document.getElementsByTagName("script")[0];b.type="text/javascript",b.async=!0,b.src=A+"/"+a+"/experiments.js",c.parentNode.insertBefore(b,c)}function s(a){localStorage.setItem("dbex::data",JSON.stringify(a)),b(x,"x",y),q(a)}function t(){var a=JSON.parse(localStorage.getItem("dbex::data")||[]);q(a)}var u,v="_dbexs",w="_dbexu",x="_dbexdr",y=3600,z=48211200,A="//dbex-tracker.driveback.ru",B=!1,C=[],D={},E=[];u=function(){var a=arguments;if(0!==a.length){if("init"===a[0])return void(p()?t():r(a[1]));1===a.length&&"function"==typeof a[0]&&(a=a[0]),B?h(a):E.push(a)}},u.onLoaded=s,u.chooseVariation=function(a){var b,c=i(a);return c?(b=j(a),b<0&&(b=e(c[1]),b>=0&&(k(a,b),n(a,b))),b):-1},u.trackConversion=function(a,b){var c,d=i(a);d&&(c=j(a),c>=0&&o(a,c,b))},d()&&(a.dbex=u)}(window);